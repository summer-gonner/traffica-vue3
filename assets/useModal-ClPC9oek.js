import{d as w,r as v,b as M,F as r,bI as g,w as P,cJ as O,c as y,aT as j,aU as x,Y as _,a3 as b,cK as k}from"./index-B8Pm80oX.js";import{_ as F}from"./index.vue_vue_type_style_index_0_lang-CFuk3e67.js";function I(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!j(n)}const h=w({props:{content:{type:[String,Function]},closeModal:Function,open:Boolean},setup(n,{attrs:c,expose:C}){const l=v(!1),u=v({...c,...n}),s=M(()=>({...c,...n,...r(u)})),d=M(()=>{const e=r(s);return{...g(e,["onCancel","onOk","closeModal","content"]),open:e.open,confirmLoading:l.value,onCancel:a,onOk:f}}),p=e=>{u.value.open=e},i=e=>{u.value={...r(s),...e}};P(()=>u.value.open,e=>{var o;Object.is(e,!1)&&((o=n.closeModal)==null||o.call(n))});const f=async e=>{var o,t;l.value=!0;try{await((t=(o=r(s))==null?void 0:o.onOk)==null?void 0:t.call(o,e)),p(!1)}catch(m){return Promise.reject(m)}finally{l.value=!1}},a=async e=>{var o,t;await((t=(o=r(s))==null?void 0:o.onCancel)==null?void 0:t.call(o,e)),p(!1)};return C({setProps:i}),()=>{const e=r(s),{content:o}=e,t=O(o)?o():o;return y(F,r(d),I(t)?t:{default:()=>[t]})}}}),S=()=>{var f;let n;const c=v(),C=(f=x())==null?void 0:f.appContext,l=v(!1),u=async()=>{if(await b(),l.value&&c.value)return c.value;if(n)return n;const a=document.createElement("div"),e=y(h);return e.appContext=C,k(e,a),n=e.component,n.props.closeModal=d,n},s=async a=>{var o,t,m;const e=await u();Object.is(e,c.value)?(o=e==null?void 0:e.setProps)==null||o.call(e,a):(m=(t=e==null?void 0:e.exposed)==null?void 0:t.setProps)==null||m.call(t,a)},d=()=>{s({open:!1})},p=async a=>{s({...a,closeModal:d,open:!0}),await b()},i=(a,{attrs:e,slots:o})=>(l.value=!0,y(h,_({ref:c},{...e,...a}),o));return i.show=p,i.hide=d,i.setProps=s,[i,c]};export{S as u};
