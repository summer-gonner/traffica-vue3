import{f as m}from"./index-CIQauGJF.js";import{d as S,b as f,n as k,B as V,dd as U,de as $,F as e,az as F,cO as T,o as E,f as G,q as x,c as t,E as a,G as o,H as s,K as H,Q as O,y as v,aY as R,k as j}from"./index-B8Pm80oX.js";import{p as q,P as A}from"./index-BRG9fhiq.js";import{D as r}from"./index-Bp1gl4D3.js";import{T as M}from"./index-Qnpm0yEw.js";import{C as _}from"./index-INlSDQaG.js";import"./is-BPG7p_4t.js";import"./_castArrayLikeObject-DUjGHYOU.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./_baseUniq-kMXtQ-ld.js";import"./CheckOutlined-D9pyqrzu.js";import"./useRefs-QkKGnXKa.js";import"./index-kU5KwxBj.js";import"./index-CND5kIK4.js";import"./collapseMotion-Dg6yIgr5.js";import"./pick-yPjmipd3.js";import"./hasIn-D18GTBYl.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-Cz6_zboM.js";import"./PlusOutlined-6eP1e5F5.js";const b=S({__name:"index",props:{...q(),strokeColor:{type:[String,Object,Function]}},setup(g){const n=g,h=f(()=>typeof n.strokeColor=="function"?{...n,strokeColor:n.strokeColor(n.percent)}:{...n,strokeColor:n.strokeColor});return(d,i)=>(k(),V(e(A),U($(h.value)),null,16))}}),K={class:"sys-server-stat-container"},Q={class:"disk-info"},Y={class:"disk-info--item"},J={class:"disk-info"},W={class:"disk-info--item"},X=S({name:"SystemMonitorServe",__name:"index",setup(g){let n;const h=F({runtime:{os:"",arch:"",nodeVersion:"",npmVersion:""},disk:{size:0,used:0,available:0},memory:{total:0,available:0},cpu:{manufacturer:"",brand:"",physicalCores:0,model:"",speed:0,rawCurrentLoad:0,rawCurrentLoadIdle:0,coresLoad:[]}}),{runtime:d,disk:i,memory:u,cpu:c}=T(h),y=f(()=>({size:m(i.value.size),used:m(i.value.used),available:m(i.value.available)})),I=f(()=>({total:m(u.value.total),free:m(u.value.available),used:m(u.value.total-u.value.available)})),B=f(()=>i.value.size<=0?0:Math.floor(i.value.used/i.value.size*100)),D=f(()=>u.value.total<=0?0:Math.floor((u.value.total-u.value.available)/u.value.total*100)),N=f(()=>`${c.value.manufacturer} ${c.value.brand} @ ${c.value.speed}GHz`),z=async()=>{const l=await R.systemServe.serveStat();d.value=l.runtime,i.value=l.disk,u.value=l.memory,c.value=l.cpu};z();const p=l=>l<30?"#5cb87a":l<70?"#e6a23c":"#f53f3f",P=(l,C)=>C<=0?0:Math.floor(l/C*100);return E(()=>{n=setInterval(z,1e4)}),G(()=>{clearInterval(n)}),(l,C)=>(k(),x("div",K,[t(e(_),{class:"stat-card",title:"运行环境"},{default:a(()=>[t(e(r),{column:1,"label-style":{width:"50%"}},{default:a(()=>[t(e(r).Item,{label:"操作系统"},{default:a(()=>[o(s(e(d).os),1)]),_:1}),t(e(r).Item,{label:"系统架构"},{default:a(()=>[o(s(e(d).arch),1)]),_:1}),t(e(r).Item,{label:"Node版本"},{default:a(()=>[t(e(M),{color:"processing",size:"small"},{default:a(()=>[o("v"+s(e(d).nodeVersion),1)]),_:1})]),_:1}),t(e(r).Item,{label:"NPM版本"},{default:a(()=>[t(e(M),{color:"processing",size:"small"},{default:a(()=>[o("v"+s(e(d).npmVersion),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(e(_),{class:"stat-card",title:"CPU"},{default:a(()=>[t(e(r),{column:1,"label-style":{width:"50%"},"content-style":{width:"50%"}},{default:a(()=>[t(e(r).Item,{label:"详细"},{default:a(()=>[o(s(N.value),1)]),_:1}),t(e(r).Item,{label:"负载"},{default:a(()=>[t(b,{percent:P(e(c).rawCurrentLoad,e(c).rawCurrentLoadIdle+e(c).rawCurrentLoad),"stroke-color":p},null,8,["percent"])]),_:1}),(k(!0),x(H,null,O(e(c).coresLoad,(w,L)=>(k(),V(e(r).Item,{key:L,label:`核心${L+1} 负载`},{default:a(()=>[t(b,{percent:P(w.rawLoad,w.rawLoad+w.rawLoadIdle),"stroke-color":p},null,8,["percent"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),t(e(_),{class:"stat-card",title:"磁盘"},{default:a(()=>[v("div",Q,[t(e(r),{class:"disk-info--item",column:1},{default:a(()=>[t(e(r).Item,{label:"总空间"},{default:a(()=>[o(s(y.value.size),1)]),_:1}),t(e(r).Item,{label:"已用空间"},{default:a(()=>[o(s(y.value.used),1)]),_:1}),t(e(r).Item,{label:"可用空间"},{default:a(()=>[o(s(y.value.available),1)]),_:1})]),_:1}),v("div",Y,[t(b,{type:"dashboard",percent:B.value,width:100,"stroke-color":p},null,8,["percent"])])])]),_:1}),t(e(_),{class:"stat-card",title:"内存"},{default:a(()=>[v("div",J,[t(e(r),{class:"disk-info--item",column:1},{default:a(()=>[t(e(r).Item,{label:"总内存"},{default:a(()=>[o(s(I.value.total),1)]),_:1}),t(e(r).Item,{label:"已用内存"},{default:a(()=>[o(s(I.value.used),1)]),_:1}),t(e(r).Item,{label:"可用内存"},{default:a(()=>[o(s(I.value.free),1)]),_:1})]),_:1}),v("div",W,[t(b,{type:"dashboard",percent:D.value,width:100,"stroke-color":p},null,8,["percent"])])])]),_:1})]))}}),he=j(X,[["__scopeId","data-v-f6d9afc1"]]);export{he as default};
