import{b as _}from"./columns-Dg7exbw3.js";import{c as n,aT as T,aS as R,eg as g,d as C,r as b,n as D,B as k,ak as S,F as m,E as u,G as v,aY as s,A as P}from"./index-B8Pm80oX.js";import{f as A}from"./dateUtil-E1W9AnjJ.js";import{T as F}from"./index-Qnpm0yEw.js";import{u as N,_ as V}from"./dynamic-table-D22kRkZE.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-CofY2-NC.js";import"./dayjs.min-TeQhONF1.js";import"./index.vue_vue_type_style_index_0_lang-CFuk3e67.js";import{u as $}from"./useFormModal-CmrBxBAu.js";import"./index-CWarxRuf.js";import"./index-CND5kIK4.js";import"./_baseUniq-kMXtQ-ld.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-Dg6yIgr5.js";import"./move-B3QdINpa.js";import"./RightOutlined-BsZy0Phy.js";import"./VerticalRightOutlined-C0b_NAnm.js";import"./cloneDeep-lQkziu_-.js";import"./schema-form.vue_vue_type_script_setup_true_lang-CqVOkWCm.js";import"./isNumber-BQFvOqOr.js";import"./is-BPG7p_4t.js";import"./index-BT78Vb1q.js";import"./useFlexGapSupport-DLL49fC4.js";import"./hasIn-D18GTBYl.js";import"./debounce-TsE9rPWj.js";import"./QuestionCircleOutlined-DwMKnzgY.js";import"./_castArrayLikeObject-DUjGHYOU.js";import"./index-7VmM7i5b.js";import"./DownOutlined-BRycSuUV.js";import"./index-CIQauGJF.js";import"./pick-yPjmipd3.js";import"./FullscreenOutlined-BZ3QrFwa.js";import"./index-CfT4fuvs.js";import"./LeftOutlined-BKTs5glU.js";import"./zh_CN-CAyhejr6.js";import"./index-iNKLbYy_.js";import"./useMergedState-Cz6_zboM.js";import"./index-B7GNZFXE.js";import"./EnterOutlined-BnZ699CI.js";import"./CheckOutlined-D9pyqrzu.js";import"./CopyOutlined-D95pQ5l8.js";import"./index-g76Nm4Kx.js";import"./isMobile-BbN7I0i_.js";import"./useRefs-QkKGnXKa.js";import"./index-DhL-eOiI.js";import"./index-BRG9fhiq.js";import"./index-B4w1aCCw.js";import"./useModal-ClPC9oek.js";function q(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const f="/system/dict-item/:id",L=t=>R.hasRoute(f)?n(g,{to:{name:f,params:{id:t.id}}},{default:()=>[t.code]}):t.code,M=[{title:"ID",dataIndex:"id",sorter:!0,width:60},{title:"字典名称",dataIndex:"name"},{title:"字典编码",dataIndex:"code",customRender:({record:t})=>n(L,t,null)},{title:"状态",dataIndex:"status",width:80,customRender:({record:t})=>{const r=~~t.status===1,d=r?"green":"red",o=r?"启用":"停用";return n(F,{color:d},q(o)?o:{default:()=>[o]})}},{title:"备注",dataIndex:"remark"},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,width:160,customRender:({record:t})=>A(t.createdAt)}],j=[{field:"name",label:"字典名称",component:"Input",colProps:{span:8}},{field:"code",label:"字典编码",component:"Input",colProps:{span:8}}],z=[{field:"name",component:"Input",label:"字典名称",rules:[{required:!0,type:"string"}]},{field:"code",component:"Input",label:"字典编码",rules:[{required:!0,type:"string"}]},{field:"status",label:"状态",component:"RadioGroup",defaultValue:1,componentProps:{options:[{label:"启用",value:1},{label:"禁用",value:0}]}},{field:"remark",component:"InputTextArea",label:"备注",colProps:{span:24},componentProps:{autoSize:{minRows:2}}}],$t=C({name:"SystemDict",__name:"index",setup(t){const p=b({}),r=b({}),[d,o]=N({formProps:{schemas:j}}),[h]=$(),y=async e=>{const[a]=await h({modalProps:{title:`${e.id?"编辑":"新增"}字典`,width:"50%",onFinish:async i=>{console.log("新增/编辑字典",i),e.id?await s.systemDictType.dictTypeUpdate({id:e.id},i):await s.systemDictType.dictTypeCreate(i),o==null||o.reload()}},formProps:{labelWidth:120,schemas:z}});a==null||a.setFieldsValue({...e})},w=async e=>{await s.systemDictType.dictTypeDelete({id:e.id}),o==null||o.reload()},x=[...M,{title:"操作",width:130,dataIndex:"ACTION",hideInSearch:!0,fixed:"right",actions:({record:e})=>[{label:"编辑",auth:{perm:"system:dict-type:update",effect:"disable"},onClick:()=>y(e)},{label:"删除",auth:"system:dict-type:delete",popConfirm:{title:"你确定要删除吗？",placement:"left",onConfirm:()=>w(e)}}]}],I=async(e,a)=>{const i=a.id;if(e){r.value[i]=!0;const{items:l=[]}=await s.systemDictItem.dictItemList({typeId:i}).finally(()=>r.value[i]=!1);p.value[i]=l}};return(e,a)=>{const i=P("a-button"),l=V;return D(),k(m(d),{"row-key":"id","header-title":"字典管理","data-request":m(s).systemDictType.dictTypeList,columns:x,bordered:"",size:"small",onExpand:I},S({toolbar:u(()=>[n(i,{type:"primary",disabled:!e.$auth("system:dict-type:create"),onClick:a[0]||(a[0]=c=>y({}))},{default:u(()=>a[1]||(a[1]=[v(" 新增 ")])),_:1},8,["disabled"])]),_:2},[e.$router.hasRoute(m(f))?{name:"expandedRowRender",fn:u(({record:c})=>[n(l,{size:"small",columns:m(_),loading:r.value[c.id],"data-source":p.value[c.id],pagination:!1},null,8,["columns","loading","data-source"])]),key:"0"}:void 0]),1032,["data-request"])}}});export{$t as default};
