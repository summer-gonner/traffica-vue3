import{f as m}from"./dateUtil-E1W9AnjJ.js";import{c as s,ap as A,eo as R,d as S,aC as k,r,b as B,w as M,n as p,q as v,E as h,F as w,y as f,L as N,K as V,N as g,aq as q,aY as E}from"./index-B8Pm80oX.js";import{T as L}from"./index-Qnpm0yEw.js";import{P as O}from"./PlusOutlined-6eP1e5F5.js";import{_ as D}from"./index-DhL-eOiI.js";const _=a=>/^https?:\/\//.test(a)?a:R+a,$=[{title:"头像",width:80,dataIndex:"avatar",hideInSearch:!0,customRender:({record:a})=>s(A,{src:_(a.avatar)},null)},{title:"用户名",width:120,dataIndex:"username"},{title:"呢称",width:120,hideInSearch:!0,dataIndex:"nickname"},{title:"邮箱",width:120,dataIndex:"email"},{title:"手机",width:120,dataIndex:"mobile"},{title:"备注",width:120,dataIndex:"remark"},{title:"状态",dataIndex:"status",width:100,hideInSearch:!0,formItemProps:{component:"Select",componentProps:{options:[{label:"启用",value:1},{label:"禁用",value:0}]}},customRender:({record:a})=>{const t=~~a.status===1;return s(L,{color:t?"success":"red"},{default:()=>[t?"启用":"禁用"]})}},{title:"创建时间",dataIndex:"createTime",width:120,hideInSearch:!0,customRender:({record:a})=>a.createTime===""?"":m(a.createTime)},{title:"修改时间",dataIndex:"updateTime",width:120,hideInSearch:!0,customRender:({record:a})=>a.updateTime===""?"":m(a.updateTime)}],F={key:0},G=["src"],H=S({name:"AvatarUpload",inheritAttrs:!1,__name:"AvatarUpload",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(a){const t=k(a,"value"),o=r([]),u=r(!1),d=r(""),i=r(""),c=B(()=>_(t.value)),I=M(t,e=>{e&&!o.value.length&&(o.value=[{uid:`vc-upload-${Date.now()}-1`,name:e.split("/").at(-1),status:"done",url:c.value}],I())}),x=e=>{const n=e.type==="image/jpeg"||e.type==="image/png";n||g.error("You can only upload JPG/PNG file!");const l=e.size/1024/1024<2;return l||g.error("Image must smaller than 2MB!"),n&&l},b=async e=>{const{filename:n}=await E.toolsUpload.uploadUpload({file:e});t.value=n},y=async e=>{await b(e.file)},T=({file:e})=>{console.log("onChange",e),e.status="done",o.value=[e]},C=e=>{console.log("handleRemove",e),t.value="",o.value=[]},U=()=>{u.value=!1,i.value=""},P=async e=>{!e.url&&!e.preview&&(e.preview=c.value),d.value=e.url||e.preview,u.value=!0,i.value=e.name||e.url.substring(e.url.lastIndexOf("/")+1)};return(e,n)=>{const l=q;return p(),v(V,null,[s(w(D),{"file-list":o.value,name:"avatar","list-type":"picture-card",class:"min-h-[110px]","custom-request":y,onBeforeUpload:x,onChange:T,onRemove:C,onPreview:P},{default:h(()=>[o.value.length<1?(p(),v("div",F,[s(w(O)),n[0]||(n[0]=f("div",{style:{"margin-top":"8px"}},"Upload",-1))])):N("",!0)]),_:1},8,["file-list"]),s(l,{open:u.value,title:i.value,footer:null,onCancel:U},{default:h(()=>[f("img",{alt:"example",style:{width:"100%"},src:d.value},null,8,G)]),_:1},8,["open","title"])],64)}}});export{H as _,$ as b};
