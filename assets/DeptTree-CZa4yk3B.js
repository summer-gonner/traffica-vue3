import{d as N,r as i,b as V,n as b,q as A,y as g,c as s,E as r,G as y,K as S,aY as z,ep as I,X as L,aX as M,k as U}from"./index-B8Pm80oX.js";import{_ as X,M as $}from"./index-CND5kIK4.js";import{D as q}from"./index-CWarxRuf.js";import{c as F}from"./cloneDeep-lQkziu_-.js";import{_ as G}from"./index-iNKLbYy_.js";import"./_baseUniq-kMXtQ-ld.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-Dg6yIgr5.js";import"./move-B3QdINpa.js";import"./RightOutlined-BsZy0Phy.js";import"./debounce-TsE9rPWj.js";const P={style:{"--border":1},class:"header"},Y=N({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(j,{emit:D}){const m=D,d=i(""),p=i([]),l=i([]),_=i(!0),c=i(!0),f=V(()=>v(F(p.value),d.value)),v=(t,e="")=>t.filter(n=>{var a,o;return(a=n.children)!=null&&a.length&&(n.children=v(n.children,e),n.children.length)?!0:(o=n.name)==null?void 0:o.includes(e)}),h=async()=>{c.value=!0,p.value=await z.systemDept.deptList({}).finally(()=>c.value=!1),l.value=[...l.value,...p.value.map(t=>Number(t.id))],m("init",p.value)},K=t=>{m("select",t[0])},x=(t,e=[])=>t.reduce((n,a)=>{var o;return n.push(a.id),(o=a.children)!=null&&o.length&&x(a.children,n),n},e),T=()=>{l.value=x(f.value)},k=t=>{l.value=t,_.value=!1};return h(),(t,e)=>{const n=I,a=L,o=X,w=$,B=q,C=G,E=M;return b(),A(S,null,[g("div",P,[e[5]||(e[5]=g("div",{class:"title"},"组织架构",-1)),s(n,{value:d.value,"onUpdate:value":e[0]||(e[0]=u=>d.value=u),size:"small",placeholder:"搜索"},null,8,["value"]),s(B,null,{overlay:r(()=>[s(w,null,{default:r(()=>[s(o,{onClick:T},{default:r(()=>e[3]||(e[3]=[y(" 展开全部 ")])),_:1}),s(o,{onClick:e[1]||(e[1]=u=>l.value=[])},{default:r(()=>e[4]||(e[4]=[y(" 折叠全部 ")])),_:1})]),_:1})]),default:r(()=>[s(a,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),s(E,{spinning:c.value},{default:r(()=>[s(C,{expandedKeys:l.value,"onUpdate:expandedKeys":e[2]||(e[2]=u=>l.value=u),class:"min-h-1xl","auto-expand-parent":_.value,"tree-data":f.value,"field-names":{key:"id",title:"name"},onSelect:K,onExpand:k},null,8,["expandedKeys","auto-expand-parent","tree-data"])]),_:1},8,["spinning"])],64)}}}),oe=U(Y,[["__scopeId","data-v-0e3c215a"]]);export{oe as default};
